{"version":3,"file":"commonHelpers.js","sources":["../src/js/elements.js","../src/js/is-open.js","../src/js/pixabay.api.js","../src/js/render-functions.js","../src/js/izi-toast.js","../src/js/simplelightbox.js","../src/js/scrolling.js","../src/main.js"],"sourcesContent":["\nexport const refs = {\n    imageSearchForm: document.querySelector('.image-search-form'),\n    gallery: document.querySelector('.images-gallery'),\n    loader: document.querySelector('.loader-container'),\n    loadMoreBtn: document.querySelector('.load-more-btn')\n}","export function showEl(element) {\n    element.classList.add(\"is-open\")\n}\n\nexport function hideEl(element) {\n    element.classList.remove(\"is-open\")\n}\n\n\n","// ============================================= INCLUDING AXIOS\nimport axios from 'axios';\n\n// ============================================= MAKING REQUEST\nexport async function findImages(image, page, limit) {\n\n// =========================================== SEARCH PARAMS\nconst imageSearchParams = new URLSearchParams({\n  key: '42878081-96b370588af70c81d3a302fb0',\n  q: image,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  order: 'latest',\n  safesearch: true,\n  per_page: limit,\n  page: page,\n});\nconst response = await axios.get(\n  `https://pixabay.com/api/?${imageSearchParams}`\n);\nconsole.log(response)\nreturn response;\n}\n","// ======================================== RENDER TEMPLATE\n\nexport function imagesRenderTemplate(imagesData) {\n  return imagesData.map(imageTemplate).join('');\n}\n\nfunction imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  downloads,\n  comments,\n}) {\n  return `<li class=\"gallery-item\">\n  <a class=\"image-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n      loading=\"lazy\"\n      width=\"360\"\n      height=\"152\"\n    />\n  </a>\n\n  <div class=\"tags-container\">\n    <div class=\"tag\">\n      <p class=\"tag-name\">likes</p>\n      <span class=\"tag-details\">${likes}</span>\n    </div>\n    <div class=\"tag\">\n      <p class=\"tag-name\">views</p>\n      <span class=\"tag-details\">${views}</span>\n    </div>\n    <div class=\"tag\">\n      <p class=\"tag-name\">downloads</p>\n      <span class=\"tag-details\">${downloads}</span>\n    </div>\n    <div class=\"tag\">\n      <p class=\"tag-name\">comments</p>\n      <span class=\"tag-details\">${comments}</span>\n    </div>\n  </div>\n</li>`;\n}\n\n\n","// ======================================= INCLUDING IZITOAST\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// ====================================== FUNCTIONS\n\nexport function warning(message) {\n    iziToast.warning({\n        message,\n        position: 'topRight',\n      });\n}\n\nexport function error(message) {\n    iziToast.error({\n        message,\n        position: 'topRight',\n        messageColor: '#fafafb',\n        messageSize: '16px',\n        maxWidth: '432px',\n        backgroundColor: 'rgb(239, 64, 64)',\n        position: 'topRight',\n        progressBarColor: 'rgb(181, 27, 27)',\n        // icon: 'icon-error-sign',\n      });\n}","// ======================================= INLCUDING SIMPLE LIGHTBOX\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet myLightboxGallery;\n\nexport function handleLightbox() {\n    if (!myLightboxGallery) {\n      myLightboxGallery = new SimpleLightbox('.gallery a');\n    } else {\n      myLightboxGallery.refresh();\n    }\n}\n\n","let lastScrollTop = 0;\nexport function smoothScroll() {\n    const galleryItem = document.querySelector(\".gallery-item\")\n    const scrollHeight = galleryItem.getBoundingClientRect() * 2;\n    window.addEventListener('scroll', function() {\n        let st = window.pageYOffset || document.documentElement.scrollTop; \n        if (st > lastScrollTop){\n            window.scrollBy(0, scrollHeight); // Scroll down\n        } else {\n            window.scrollBy(0, -scrollHeight); // Scroll up\n        }\n        lastScrollTop = st <= 0 ? 0 : st; \n    }, false);\n}","// ======================================= IMPORTS\nimport { refs } from './js/elements';\n// import { handleEmptyField } from './js/form-validation';\nimport { showEl, hideEl } from './js/is-open';\nimport { findImages } from './js/pixabay.api';\nimport { imagesRenderTemplate } from './js/render-functions';\nimport { warning, error } from './js/izi-toast';\nimport { handleLightbox } from './js/simplelightbox';\nimport { smoothScroll } from './js/scrolling';\n\n// ======================================== EVENT LISTENERS\nrefs.imageSearchForm.addEventListener('submit', onImgSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreImg);\n\n// ======================================== PAGE\nlet page = 1;\nlet limit = 15;\nlet totalImg;\nlet maxPage;\n\n// ======================================== ON IMG SUBMIT\nlet searchImage;\n\nfunction onImgSubmit(event) {\n\n  event.preventDefault();\n  refs.gallery.innerHTML = '';\n  hideEl(refs.loadMoreBtn);\n  showEl(refs.loader);\n  page = 1;\n\n  searchImage = event.currentTarget.elements.searchImage.value.trim();\n  event.currentTarget.reset();\n  \n  // checking for empty fields\n  if (searchImage === '') {\n    warning('Write what image you want to search for');\n    hideEl(refs.loader);\n    return;\n  }\n\n  // making a request\n  findImages(searchImage, page, limit).then(response => {\n    // checking if images exist\n    if (!response.data.totalHits) {\n      error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      hideEl(refs.loader);\n      return;\n    }\n\n    totalImg = response.data.totalHits;\n    maxPage = Math.ceil(totalImg / limit);\n\n    if (!totalImg < limit) {\n      showEl(refs.loadMoreBtn);\n    }\n\n    // rendering images\n    const imagesMarkup = imagesRenderTemplate(response.data.hits);\n    refs.gallery.innerHTML = imagesMarkup;\n    page += 1;\n    hideEl(refs.loader);\n\n    // adding lightbox\n    handleLightbox();\n    // smooth scrolling\n    smoothScroll();\n  });\n}\n\n// ================================================ ON LOAD MORE IMG\nfunction onLoadMoreImg() {\n  refs.loader.style.order = 3;\n  showEl(refs.loader);\n\n  // checking if there are more images\n  if (page > maxPage) {\n    hideEl(refs.loadMoreBtn);\n    hideEl(refs.loader);\n    return error(\"We're sorry, but you've reached the end of search results\");\n  }\n  // making a request\n  findImages(searchImage, page, limit)\n    .then(response => {\n      if (response.data.totalHits > limit) {\n        hideEl(refs.loadMoreBtn);\n        return;\n      }\n      const imagesMarkup = imagesRenderTemplate(response.data.hits);\n      refs.gallery.insertAdjacentHTML('beforeend', imagesMarkup);\n      hideEl(refs.loader);\n      showEl(refs.loadMoreBtn);\n      page += 1;\n      handleLightbox();\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n"],"names":["refs","showEl","element","hideEl","findImages","image","page","limit","imageSearchParams","response","axios","imagesRenderTemplate","imagesData","imageTemplate","webformatURL","largeImageURL","tags","likes","views","downloads","comments","warning","message","iziToast","error","myLightboxGallery","handleLightbox","SimpleLightbox","lastScrollTop","smoothScroll","scrollHeight","st","onImgSubmit","onLoadMoreImg","totalImg","maxPage","searchImage","event","imagesMarkup"],"mappings":"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"}