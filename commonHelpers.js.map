{"version":3,"file":"commonHelpers.js","sources":["../src/js/elements.js","../src/js/is-open.js","../src/js/pixabay.api.js","../src/js/render-functions.js","../src/js/izi-toast.js","../src/js/smooth-scroll.js","../src/main.js"],"sourcesContent":["\nexport const refs = {\n    imageSearchForm: document.querySelector('.image-search-form'),\n    gallery: document.querySelector('.images-gallery'),\n    loader: document.querySelector('.loader-container'),\n    loadMoreBtn: document.querySelector('.load-more-btn'),\n    // searchContainer: document.querySelector(\".search-container\"),\n}","export function showEl(element) {\n    element.classList.add(\"is-open\")\n}\n\nexport function hideEl(element) {\n    element.classList.remove(\"is-open\")\n}\n\n\n","\nimport axios from 'axios';\n\nconst Axios = axios.create({\n  baseURL: \"https://pixabay.com/api/\"\n})\n\nexport async function findImages(image, page, limit) {\n\nconst params = {\n  key: '42878081-96b370588af70c81d3a302fb0',\n  q: image,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  order: 'latest',\n  safesearch: true,\n  per_page: limit,\n  page: page,\n};\n\nconst response = await Axios.get(\n  ``, { params }\n);\n\nreturn response;\n}\n","// ======================================== RENDER TEMPLATE\n\nexport function imagesRenderTemplate(imagesData) {\n  return imagesData.map(imageTemplate).join('');\n}\n\nfunction imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  downloads,\n  comments,\n}) {\n  return `<li class=\"gallery-item\">\n  <a class=\"image-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n      loading=\"lazy\"\n      width=\"360\"\n      height=\"152\"\n    />\n  </a>\n\n  <div class=\"tags-container\">\n    <div class=\"tag\">\n      <p class=\"tag-name\">likes</p>\n      <span class=\"tag-details\">${likes}</span>\n    </div>\n    <div class=\"tag\">\n      <p class=\"tag-name\">views</p>\n      <span class=\"tag-details\">${views}</span>\n    </div>\n    <div class=\"tag\">\n      <p class=\"tag-name\">downloads</p>\n      <span class=\"tag-details\">${downloads}</span>\n    </div>\n    <div class=\"tag\">\n      <p class=\"tag-name\">comments</p>\n      <span class=\"tag-details\">${comments}</span>\n    </div>\n  </div>\n</li>`;\n}\n\n\n\n","// ======================================= INCLUDING IZITOAST\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// ====================================== FUNCTIONS\n\nexport function warningMessage(message) {\n    iziToast.warning({\n        message,\n        position: 'topRight',\n      });\n}\n\nexport function errorMessage(message) {\n    iziToast.error({\n        message,\n        position: 'topRight',\n        messageColor: '#fafafb',\n        messageSize: '16px',\n        maxWidth: '432px',\n        backgroundColor: 'rgb(239, 64, 64)',\n        position: 'topRight',\n        progressBarColor: 'rgb(181, 27, 27)',\n        // icon: 'icon-error-sign',\n      });\n}","export function turnSmoothScroll() {\n        const galleryItem = document.querySelector(\".gallery-item\");\n        const itemHeight = galleryItem.getBoundingClientRect().height;\n        window.scrollBy({\n            top: itemHeight * 2,\n            behavior: \"smooth\",\n          });\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// ======================================= IMPORTS\nimport { refs } from './js/elements';\nimport { showEl, hideEl } from './js/is-open';\nimport { findImages } from './js/pixabay.api';\nimport { imagesRenderTemplate } from './js/render-functions';\nimport { warningMessage, errorMessage } from './js/izi-toast';\nimport { turnSmoothScroll } from './js/smooth-scroll';\n\n// ======================================== EVENT LISTENERS\nrefs.imageSearchForm.addEventListener('submit', onImgSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreImg);\n\n// ======================================== PAGE VARIABLES\n\nlet currentPage = 0;\nlet limitPerPage = 100;\nlet totalImg;\nlet maxNumPage;\n\n// ======================================= LIGHTBOX INITIALIZATION\nlet lightbox = new SimpleLightbox('.gallery a');\n\n// ======================================== ON IMG SUBMIT\nlet searchImage;\n\nasync function onImgSubmit(event) {\n  event.preventDefault();\n  refs.gallery.innerHTML = '';\n  hideEl(refs.loadMoreBtn);\n  showEl(refs.loader);\n  searchImage = event.currentTarget.elements.searchImage.value.trim('');\n  // checking for empty fields\n  if (searchImage === '') {\n    errorMessage('Write what image you want to search for');\n    return;\n  }\n\n  event.currentTarget.reset();\n  currentPage = 1;\n\n  try {\n    const res = await findImages(searchImage, currentPage, limitPerPage);\n    // checking if images are present\n    if (res.data.totalHits === 0) {\n      errorMessage('No images found');\n      hideEl(refs.loader);\n      return;\n    }\n    // rendering images\n    const galleryMarkup = imagesRenderTemplate(res.data.hits);\n    refs.gallery.innerHTML = galleryMarkup;\n    // calculate num of img and the maximum possible page num\n    totalImg = res.data.totalHits;\n    maxNumPage = Math.ceil(res.data.totalHits / limitPerPage);\n\n    // checking for the last page\n    if (totalImg <= limitPerPage) {\n      warningMessage(\n        \"You've reached the end of the collection. No more images are left\"\n      );\n    } else {\n      // adding load more btn\n      showEl(refs.loadMoreBtn);\n    }\n    hideEl(refs.loader);\n    lightbox.refresh();\n  } catch (err) {\n    errorMessage(`Error: ${err}`)\n  }\n}\n\n// ================================================ ON LOAD MORE IMG\n\nasync function onLoadMoreImg() {\n  hideEl(refs.loadMoreBtn);\n  refs.loadMoreBtn.style.order = 4;\n  refs.loader.style.order = 5;\n  showEl(refs.loader);\n \n  currentPage += 1;\n\n  try {\n    // making request\n    const res = await findImages(searchImage, currentPage, limitPerPage);\n    // rendering images\n    const galleryMarkup = imagesRenderTemplate(res.data.hits);\n    refs.gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n    setTimeout(() => {\n      turnSmoothScroll();\n    }, 50);\n    // checking for the last page\n    if (currentPage >= maxNumPage || limitPerPage * currentPage >= totalImg) {\n      warningMessage(\n        \"You've reached the end of the collection. No more images are left\"\n      );\n    } else {\n      // adding load more btn\n      showEl(refs.loadMoreBtn);\n    }\n    hideEl(refs.loader);\n    lightbox.refresh();\n  } catch (err) {\n    errorMessage(`Error: ${err}`)\n  }\n}\n"],"names":["refs","showEl","element","hideEl","Axios","axios","findImages","image","page","limit","params","imagesRenderTemplate","imagesData","imageTemplate","webformatURL","largeImageURL","tags","likes","views","downloads","comments","warningMessage","message","iziToast","errorMessage","turnSmoothScroll","itemHeight","onImgSubmit","onLoadMoreImg","currentPage","limitPerPage","totalImg","maxNumPage","lightbox","SimpleLightbox","searchImage","event","res","galleryMarkup","err"],"mappings":"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"}